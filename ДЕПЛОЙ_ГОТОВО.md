# ‚úÖ –î–ï–ü–õ–û–ô –ó–ê–í–ï–†–®–Å–ù!

## üéâ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞ ‚úÖ
- –ö—Ä–µ–¥–∏—Ç—ã –Ω–∞—á–∏—Å–ª—è–ª–∏—Å—å, –Ω–æ `subscription_tier` –Ω–µ –º–µ–Ω—è–ª—Å—è
- –ü—Ä–∏—á–∏–Ω–∞: –ø–æ–∫—É–ø–∞–ª–∏—Å—å **–ø–∞–∫–µ—Ç—ã –∫—Ä–µ–¥–∏—Ç–æ–≤**, –∞ –Ω–µ **–ø–æ–¥–ø–∏—Å–∫–∏**
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: constraint –≤ –ë–î –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã ‚úÖ

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase):
```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è: fix_payment_constraint
ALTER TABLE payments DROP CONSTRAINT IF EXISTS check_payment_type;

ALTER TABLE payments ADD CONSTRAINT check_payment_type CHECK (
  (type = 'subscription' AND tier IS NOT NULL) 
  OR 
  (type = 'credits' AND tier IS NULL AND credits IS NOT NULL)
);
```
- ‚úÖ Constraint –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –∏–º–µ—Ç—å credits
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î

#### –ö–æ–¥ (Git):
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã (a149ba7)
- ‚úÖ –ó–∞–ø—É—à–µ–Ω–æ –≤ GitHub
- ‚úÖ –°—Ö–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö –¥–µ–ø–ª–æ–µ–≤

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ ‚úÖ
- `SUBSCRIPTION_FIX.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (EN)
- `–ö–ê–ö_–ö–£–ü–ò–¢–¨_–ü–û–î–ü–ò–°–ö–£.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (RU)
- `DEPLOY_SUBSCRIPTION_FIX.md` - –ª–æ–≥ –¥–µ–ø–ª–æ—è

## üöÄ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
|-----------|--------|---------|
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ –ì–æ—Ç–æ–≤–æ | Constraint –∏—Å–ø—Ä–∞–≤–ª–µ–Ω |
| **–ö–æ–¥** | ‚úÖ –ì–æ—Ç–æ–≤–æ | –ó–∞–ø—É—à–µ–Ω –≤ GitHub |
| **Vercel** | ‚úÖ –ì–æ—Ç–æ–≤–æ | –ü—Ä–æ–¥–∞–∫—à–Ω: kipish.fun |
| **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** | ‚úÖ –ì–æ—Ç–æ–≤–æ | 3 —Ñ–∞–π–ª–∞ —Å–æ–∑–¥–∞–Ω–æ |

## üì± –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
üëâ https://kipish.fun

### –®–∞–≥ 2: –ö—É–ø–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É (–ù–ï –ø–∞–∫–µ—Ç –∫—Ä–µ–¥–∏—Ç–æ–≤!)
1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å (–∫–ª–∏–∫ –Ω–∞ –∞–≤–∞—Ç–∞—Ä/–∏–º—è)
2. –ù–∞–∂–º–∏—Ç–µ **"–ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"**
3. **–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"Subscription (Best Value)"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **Light (Promo)** - –≤—Å–µ–≥–æ 1‚Ç¥
5. –û–ø–ª–∞—Ç–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram Wallet

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É (F5)
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å —Å–Ω–æ–≤–∞
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
   - ‚úÖ –ö—Ä–µ–¥–∏—Ç—ã —É–≤–µ–ª–∏—á–∏–ª–∏—Å—å –Ω–∞ 30
   - ‚úÖ –°—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è: **"Light"** –≤–º–µ—Å—Ç–æ "–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π"
   - ‚úÖ Badge –≤–æ–∑–ª–µ –∏–º–µ–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "Light"

## ‚ö° –í –ß–Å–ú –†–ê–ó–ù–ò–¶–ê

### üì¶ –ü–∞–∫–µ—Ç—ã –∫—Ä–µ–¥–∏—Ç–æ–≤ (One-time Photos)
- –¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–ª—è—é—Ç –∫—Ä–µ–¥–∏—Ç—ã
- –°—Ç–∞—Ç—É—Å –æ—Å—Ç–∞—ë—Ç—Å—è `free`
- ‚ùå –ù–ï –º–µ–Ω—è—é—Ç subscription_tier

### üéÅ –ü–æ–¥–ø–∏—Å–∫–∞ (Subscription)
- –î–æ–±–∞–≤–ª—è—é—Ç –∫—Ä–µ–¥–∏—Ç—ã
- ‚úÖ –ú–ï–ù–Ø–Æ–¢ subscription_tier
- –î–∞—é—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ 30 –¥–Ω–µ–π
- –ë–æ–ª—å—à–µ –∫—Ä–µ–¥–∏—Ç–æ–≤ –∑–∞ –¥–µ–Ω—å–≥–∏!

## üéØ –î–ï–ô–°–¢–í–ò–Ø –¢–†–ï–ë–£–Æ–¢–°–Ø

**–ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ "Light", –Ω—É–∂–Ω–æ:**

1. ‚ö†Ô∏è **–ù–ï –ø–æ–∫—É–ø–∞—Ç—å** "One-time Photos" (pack_1, pack_5)
2. ‚úÖ **–ö–£–ü–ò–¢–¨** "Subscription" ‚Üí "Light (Promo)"
3. ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ë–î

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Supabase:

```sql
-- –í–∞—à–∏ –ø–æ–¥–ø–∏—Å–∫–∏:
SELECT * FROM payments 
WHERE type = 'subscription' 
ORDER BY created_at DESC;

-- –í–∞—à —Å—Ç–∞—Ç—É—Å:
SELECT name, credits, subscription_tier 
FROM users 
WHERE auth_provider = 'telegram' 
ORDER BY created_at DESC 
LIMIT 3;
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### Git
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** github.com:veo3kipish-max/rerer.git
- **–ö–æ–º–º–∏—Ç:** a149ba7
- **–í–µ—Ç–∫–∞:** main

### Supabase
- **–ü—Ä–æ–µ–∫—Ç:** ndrdksmdkhljymuvxjly
- **–ú–∏–≥—Ä–∞—Ü–∏—è:** fix_payment_constraint
- **–°—Ç–∞—Ç—É—Å:** –ü—Ä–∏–º–µ–Ω–µ–Ω–∞

### Vercel
- **–î–æ–º–µ–Ω:** kipish.fun
- **–°—Ç–∞—Ç—É—Å:** Production Ready

---

## ‚ú® –ì–û–¢–û–í–û!

**–í—Å—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ!**

–¢–µ–ø–µ—Ä—å –ø–æ–¥–ø–∏—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∫—É–ø–∏—Ç—å "Light (Promo)" –∑–∞ 1‚Ç¥ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è! üéâ

---

*–î–∞—Ç–∞ –¥–µ–ø–ª–æ—è: 2025-12-09 17:11 UTC+3*  
*–í–µ—Ä—Å–∏—è: 2.4 (Subscription Fix)*
